<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Web Monetization Receivers · Web Monetization</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="This page describes the functions of the Web Monetization (WM) receiver and how"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Web Monetization Receivers · Web Monetization"/><meta property="og:type" content="website"/><meta property="og:url" content="https://webmonetization.org/"/><meta property="og:description" content="This page describes the functions of the Web Monetization (WM) receiver and how"/><meta property="og:image" content="https://webmonetization.org/img/undraw_online.svg"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/fav-webmonetization.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.0/clipboard.min.js"></script><script type="text/javascript" src="/js/custom.js"></script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/wm-icon.svg" alt="Web Monetization"/><h2 class="headerTitleWithLogo">Web Monetization</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/getting-started" target="_self">Docs</a></li><li class=""><a href="/specification.html" target="_self">Specification</a></li><li class=""><a href="https://discourse.wicg.io/t/proposal-web-monetization-a-new-revenue-model-for-the-web/3785" target="_self">WICG Forum</a></li><li class=""><a href="https://github.com/interledger/webmonetization.org" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Explainer</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/getting-started">Quick Start Guide</a></li><li class="navListItem"><a class="navItem" href="/docs/api">JavaScript API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Explainer</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/explainer">Web Monetization</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/receiving">Receiving Payments</a></li><li class="navListItem"><a class="navItem" href="/docs/sending">Sending Payments</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">More</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/specification">Specification</a></li><li class="navListItem"><a class="navItem" href="/docs/glossary">Glossary</a></li><li class="navListItem"><a class="navItem" href="/docs/resources">External Resources</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Web Monetization Receivers</h1></header><article><div><span><p>This page describes the functions of the Web Monetization (WM) receiver and how
existing payment services might become a WM receiver.</p>
<p>A WM receiver is a digital entity that accepts payments over Interledger
on behalf of a website and is capable of receiving micropayments.</p>
<p>When a user has Web Monetization enabled in their browser and they visit a
monetized website, the browser resolves a unique receiving address for sending
payments to the website's WM receiver. The browser then begins sending payments
through the user's WM sender.</p>
<h2><a class="anchor" aria-hidden="true" id="payment-pointers"></a><a href="#payment-pointers" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Payment Pointers</h2>
<p>A <a href="https://paymentpointers.org">payment pointer</a> is a unique URL assigned to your
payment account by your WM receiver.</p>
<p>The expectation is that a WM receiver will issue one or more payment pointers to
its customers and these customers will embed the pointer into the websites they
want to monetize. The user's browser then fetches connection details from the
pointer to open a payment stream with the WM receiver.</p>
<p>Payment pointers resolve to secure URLs, making it possible for WM receivers to
redirect browsers to alternate addresses using standard HTTP redirects.</p>
<p>One benefit of payment pointers is that they provide a level of indirection that
allows browsers to protect the privacy of users from their WM senders. Specifically,
a browser uses a pointer in combination with a unique session ID to request
a unique destination address and shared secret from the website's WM  receiver.
Only the unique destination address for the session is given to the WM sender.
This prevents the WM sender from correlating a payment pointer with a website.</p>
<h2><a class="anchor" aria-hidden="true" id="receiving-payments"></a><a href="#receiving-payments" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Receiving Payments</h2>
<p>Any entity that is able to accept payments on behalf of websites can be a WM
receiver if it supports the necessary protocols. To accept a stream of payments
on behalf of its users, a WM receiver <strong>MUST</strong> support the following protocols
from the Interledger stack:</p>
<ul>
<li>Interledger Protocol (ILP) - Establishes a micropayment stream and sends payments</li>
<li>Simple Payment Setup Protocol (SPSP) - Exchanges payment information between
payee and payer to facilitate payment over ILP</li>
<li>STREAM Protocol - Establishes micropayment streams between entities using the ILP</li>
</ul>
<h3><a class="anchor" aria-hidden="true" id="interledger-protocol-ilp"></a><a href="#interledger-protocol-ilp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Interledger Protocol (ILP)</h3>
<p>The ILP routes individual micropayments. Interledger allows for payments to be
sent at very high volumes and in very small denominations. Payments are sent as
Interledger packets, which are optimized for this use case.</p>
<p>The WM receiver must set up a link into the Interledger network. More specifically,
the WM receiver must have an Interledger connection (direct or indirect) to any
Web-monetized senders that want to pay the WM receiver.</p>
<h3><a class="anchor" aria-hidden="true" id="simple-payment-setup-protocol-spsp"></a><a href="#simple-payment-setup-protocol-spsp" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Simple Payment Setup Protocol (SPSP)</h3>
<p>The SPSP exchanges payment information between the WM receiver and WM sender to
facilitate payment over the ILP. The WM receiver must host a secure HTTP endpoint
that returns a unique destination address and shared secret for each request.</p>
<blockquote>
<p>SPSP messages <strong>MUST</strong> be exchanged over HTTPS.</p>
</blockquote>
<h4><a class="anchor" aria-hidden="true" id="example-response-to-an-spsp-request"></a><a href="#example-response-to-an-spsp-request" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Example Response to an SPSP Request</h4>
<ol>
<li>Alice is a customer of <em>Secure Receiving Wallet Ltd.</em> who can act as a Web
Monetization receiver.</li>
<li>She is allocated the SPSP endpoint URL <code>https://securewallet.example/~alice</code>.</li>
</ol>
<blockquote>
<p>This URL can also be expressed as: <code>$securewallet.example/~alice</code>.</p>
</blockquote>
<ol start="3">
<li>A GET request is made to her SPSP endpoint URL with an <code>accept</code> header of <code>application/spsp4+json</code>.</li>
</ol>
<pre><code class="hljs css language-json">GET https://securewallet.example/~alice
Accept: application/spsp4+json
</code></pre>
<ol start="4">
<li>The server responds with a JSON response carrying the Interledger destination
address and shared secret to use to open a payment stream with
<em>Secure Receiving Wallet</em> and send Alice money.</li>
</ol>
<pre><code class="hljs css language-ts">{
  <span class="hljs-string">"destination_account"</span>: <span class="hljs-string">"test.example.hRWyGw4JzvFCdMUlEKd1kXPZ"</span>,
  <span class="hljs-string">"shared_secret"</span>: <span class="hljs-string">"qobHsPWoyWh0gCQLx2e9x1bQeDikD4fdmYHGT52VKn8="</span>
}
</code></pre>
<p>More details on SPSP can be found in
<a href="https://interledger.org/rfcs/0009-simple-payment-setup-protocol/">IL-RFC 0009 - Simple Payment Setup Protocol</a>.</p>
<h3><a class="anchor" aria-hidden="true" id="stream-protocol"></a><a href="#stream-protocol" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>STREAM Protocol</h3>
<p>The STREAM protocol establishes micropayment streams between entities using the
ILP. STREAM is loosely based on QUIC and provides similar features over ILP that
QUIC does over IP. STREAM stands for STREAMing Transport for the Real-Time
Exchange of Assets and Messages.</p>
<p>For an entity to be a WM receiver, it only needs to run a STREAM server, accept
connections, and handle the incoming payments sent over the connection.</p>
<p>The browser uses the connection parameters (ILP destination address and shared
secret) it acquired through <a href="#simple-payment-setup-protocol-spsp">SPSP</a> to
establish a STREAM connection with the WM receiver. Then, a stream of payments
can be made to the WM receiver until the stream is closed.</p>
<p>Each set of connection parameters is unique and allows the WM receiver to
correlate the original SPSP request with the incoming connection. This makes it
easier for WM receivers to associate incoming payments with different user accounts
and Web Monetization sessions. I.e., a website can associate payments with a
user's session but the user's WM sender can't correlate the payments it makes with
the website.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/explainer"><span class="arrow-prev">← </span><span>Web Monetization</span></a><a class="docs-next button" href="/docs/sending"><span>Sending Payments</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#payment-pointers">Payment Pointers</a></li><li><a href="#receiving-payments">Receiving Payments</a><ul class="toc-headings"><li><a href="#interledger-protocol-ilp">Interledger Protocol (ILP)</a></li><li><a href="#simple-payment-setup-protocol-spsp">Simple Payment Setup Protocol (SPSP)</a></li><li><a href="#stream-protocol">STREAM Protocol</a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><div><h5>WebMonetization.org</h5></div><div><h5>Navigation</h5><a href="/">Home</a><a href="/meta-tag">Meta Tag Generator</a></div><div><h5>Community</h5><a href="https://github.com/interledger/webmonetization.org" target="_blank" rel="noreferrer noopener">GitHub</a><a href="https://forum.interledger.org" target="_blank" rel="noreferrer noopener">ILP Forum</a><a href="https://discourse.wicg.io/t/proposal-web-monetization-a-new-revenue-model-for-the-web/3785" target="_blank" rel="noreferrer noopener">Web Platform Incubator Community Group</a><a href="https://interledger.org" target="_blank" rel="noreferrer noopener">Interledger</a></div><div><h5>Resources</h5><a href="/docs/getting-started.html">Docs</a><a href="/specification.html" target="_blank" rel="noreferrer noopener">Specification</a><a href="https://paymentpointers.org" target="_blank" rel="noreferrer noopener">Payment Pointers</a></div></section><section class="copyright"></section></footer></div></body></html>